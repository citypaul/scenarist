{
  "permissions": {
    "allow": [
      "Bash(gh pr view:*)",
      "Bash(git checkout:*)",
      "Bash(pnpm test:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(pnpm build:*)",
      "Bash(pnpm vitest:*)",
      "Bash(git push:*)",
      "Bash(gh pr create --title \"feat(msw-adapter): implement dynamic MSW handler with default scenario fallback\" --body \"$(cat <<''EOF''\n## Summary\n\nImplements Phase 5 of the MSW adapter: Dynamic Handler with default scenario fallback pattern.\n\n### Dynamic Handler (`createDynamicHandler`)\n- Creates single catch-all MSW handler using `http.all(''*'', ...)`\n- Reads test ID from injected function to support concurrent test isolation\n- Looks up active scenario for the test ID\n- Finds matching mock in active scenario first\n- **Falls back to \"default\" scenario when mock not found in active scenario** â­\n- **Uses \"default\" scenario when no active scenario is set** â­\n- Returns built response from whichever scenario had the mock\n- Handles passthrough in non-strict mode (unmocked requests pass through to real network)\n- Returns 501 error in strict mode when no mock matches\n\n### Implementation Approach\n- Followed strict TDD: RED â†’ GREEN â†’ REFACTOR\n- Small, incremental commits (5 total)\n- Each test written to verify specific behavior before implementation\n- All tests passing, 100% coverage maintained\n\n### Test Coverage\n- 31 total tests across all files (5 new dynamic handler tests)\n- 100% statements, branches, functions, and lines coverage\n- Tests cover:\n  - Active scenario lookup and mock matching\n  - Default scenario fallback (when active scenario has no matching mock)\n  - Default scenario usage (when no active scenario is set)\n  - Passthrough behavior in non-strict mode\n  - Error response in strict mode\n\n### Key Features\n\n**Default Scenario Pattern:** The handler first tries to find a mock in the active scenario (test-specific), then falls back to the ''default'' scenario. This allows tests to override only specific endpoints while relying on sensible defaults for everything else.\n\n**Test Isolation:** Each test can have its own active scenario via test ID, enabling concurrent test execution with different backend states.\n\n**Flexible Strictness:** Non-strict mode (passthrough) is useful for integration tests where some real API calls are acceptable. Strict mode (501 error) helps catch unexpected requests during development.\n\n## Checklist\n\n- [x] All tests passing (31/31)\n- [x] 100% coverage on dynamic-handler.ts\n- [x] Build passes (`pnpm build`)\n- [x] No type errors\n- [x] Function and types exported from public API\n- [x] Follows TDD methodology\n- [x] Immutable patterns used throughout\n- [x] Documentation updated with learnings\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\nEOF\n)\")",
      "Bash(pnpm install)"
    ],
    "deny": [],
    "ask": []
  }
}
