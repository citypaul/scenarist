---
// Hero section with version badge, headline, tagline, and CTAs
import fs from 'node:fs';
import path from 'node:path';

// Read version from express-adapter package.json at build time
const pkgPath = path.resolve(process.cwd(), '../../packages/express-adapter/package.json');
const pkg = JSON.parse(fs.readFileSync(pkgPath, 'utf-8'));
const version = pkg.version;
const releasesUrl = 'https://github.com/citypaul/scenarist/releases';
---

<section class="relative z-10 pt-32 pb-20 px-6 overflow-hidden">
  <!-- Background Gradients -->
  <div class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-full max-w-7xl pointer-events-none">
    <div class="absolute top-20 left-1/4 w-96 h-96 bg-primary/20 rounded-full blur-3xl opacity-30 animate-pulse"></div>
    <div class="absolute top-40 right-1/4 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl opacity-30 animate-pulse delay-1000"></div>
  </div>

  <div class="max-w-4xl mx-auto text-center relative z-10">
    <!-- Version Badge -->
    <a href={releasesUrl} class="inline-flex items-center gap-2 px-3 py-1 rounded-full border border-gray-200 dark:border-white/10 bg-white/50 dark:bg-white/5 backdrop-blur-sm text-xs font-mono text-primary mb-8 hover:border-primary/50 transition-colors">
      <span class="flex w-2 h-2 rounded-full bg-primary animate-pulse"></span>
      v{version} Available
    </a>

    <!-- Headline -->
    <h1 class="text-5xl md:text-7xl font-extrabold tracking-tighter leading-[1.1] mb-6">
      <span class="text-gray-900 dark:text-white">Test Reality.</span><br>
      <span class="text-transparent bg-clip-text bg-gradient-to-r from-gray-500 to-gray-800 dark:from-gray-200 dark:to-gray-500">Control the Rest.</span>
    </h1>

    <!-- Tagline -->
    <p class="text-lg md:text-xl text-gray-600 dark:text-gray-400 max-w-2xl mx-auto mb-10 leading-relaxed">
      Playwright tests that hit your real server. Your Server Components, routes, middleware, and business logic execute for real.
      <span class="text-gray-900 dark:text-white font-semibold">Scenarist</span> mocks <em>only</em> external APIsâ€”switchable per test.
    </p>

    <!-- CTAs -->
    <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
      <!-- Install Command -->
      <button
        id="copy-install"
        class="group flex items-center gap-3 bg-white dark:bg-[#161618] border border-gray-200 dark:border-[#27272A] px-5 py-3 rounded-lg font-mono text-sm text-gray-700 dark:text-gray-300 cursor-pointer hover:border-primary/50 dark:hover:border-gray-500 hover:shadow-lg hover:shadow-primary/5 transition-all duration-300"
      >
        <span class="text-primary font-bold select-none">$</span>
        <span class="select-all">npm install scenarist</span>
        <div class="relative w-4 h-4">
            <svg class="w-4 h-4 text-gray-400 dark:text-gray-500 group-hover:text-primary transition-all absolute inset-0 opacity-100 group-[.copied]:opacity-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
            </svg>
            <svg class="w-4 h-4 text-green-500 transition-all absolute inset-0 opacity-0 group-[.copied]:opacity-100 scale-50 group-[.copied]:scale-100" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
        </div>
      </button>

      <!-- Get Started Button -->
      <a
        href="/getting-started/quick-start"
        class="px-8 py-3 bg-violet-600 text-white font-semibold rounded-lg hover:bg-violet-700 hover:scale-105 transition-all duration-300 flex items-center gap-2 shadow-lg shadow-violet-600/20"
      >
        Get Started
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
        </svg>
      </a>
    </div>

    <!-- Framework Adapters -->
    <div class="mt-10 flex flex-col items-center gap-3">
      <p class="text-sm text-gray-500 dark:text-gray-400">Adapters available for</p>
      <div class="flex items-center gap-6">
        <a href="/frameworks/nextjs" class="flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white transition-colors">
          <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
            <path d="M11.572 0c-.176 0-.31.001-.358.007a19.76 19.76 0 0 1-.364.033C7.443.346 4.25 2.185 2.228 5.012a11.875 11.875 0 0 0-2.119 5.243c-.096.659-.108.854-.108 1.747s.012 1.089.108 1.748c.652 4.506 3.86 8.292 8.209 9.695.779.251 1.6.422 2.534.525.363.04 1.935.04 2.299 0 1.611-.178 2.977-.577 4.323-1.264.207-.106.247-.134.219-.158-.02-.013-.9-1.193-1.955-2.62l-1.919-2.592-2.404-3.558a338.739 338.739 0 0 0-2.422-3.556c-.009-.002-.018 1.579-.023 3.51-.007 3.38-.01 3.515-.052 3.595a.426.426 0 0 1-.206.214c-.075.037-.14.044-.495.044H7.81l-.108-.068a.438.438 0 0 1-.157-.171l-.05-.106.006-4.703.007-4.705.072-.092a.645.645 0 0 1 .174-.143c.096-.047.134-.051.54-.051.478 0 .558.018.682.154.035.038 1.337 1.999 2.895 4.361a10760.433 10760.433 0 0 0 4.735 7.17l1.9 2.879.096-.063a12.317 12.317 0 0 0 2.466-2.163 11.944 11.944 0 0 0 2.824-6.134c.096-.66.108-.854.108-1.748 0-.893-.012-1.088-.108-1.747-.652-4.506-3.859-8.292-8.208-9.695a12.597 12.597 0 0 0-2.499-.523A33.119 33.119 0 0 0 11.572 0zm4.069 7.217c.347 0 .408.005.486.047a.473.473 0 0 1 .237.277c.018.06.023 1.365.018 4.304l-.006 4.218-.744-1.14-.746-1.14v-3.066c0-1.982.01-3.097.023-3.15a.478.478 0 0 1 .233-.296c.096-.05.13-.054.5-.054z"/>
          </svg>
          <span class="font-medium text-sm">Next.js</span>
        </a>
        <a href="/frameworks/express/getting-started" class="flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white transition-colors">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
            <path d="M24 18.588a1.529 1.529 0 0 1-1.895-.72l-3.45-4.771-.5-.667-4.003 5.444a1.466 1.466 0 0 1-1.802.708l5.158-6.92-4.798-6.251a1.595 1.595 0 0 1 1.9.666l3.576 4.83 3.596-4.81a1.435 1.435 0 0 1 1.788-.668L21.708 7.9l-2.522 3.283a.666.666 0 0 0 0 .994l4.804 6.412zM.002 11.576l.42-2.075c1.154-4.103 5.858-5.81 9.094-3.27 1.895 1.489 2.368 3.597 2.275 5.973H1.116C.943 16.447 4.005 19.009 7.92 17.7a4.078 4.078 0 0 0 2.582-2.876c.207-.666.548-.78 1.174-.588a5.417 5.417 0 0 1-2.589 3.957 6.272 6.272 0 0 1-7.306-.933 6.575 6.575 0 0 1-1.64-3.858c0-.235-.08-.455-.134-.666A88.33 88.33 0 0 1 0 11.577zm1.127-.286h9.654c-.06-3.076-2.001-5.258-4.59-5.278-2.882-.04-4.944 2.094-5.071 5.264z"/>
          </svg>
          <span class="font-medium text-sm">Express</span>
        </a>
      </div>
    </div>
  </div>
</section>

<script>
  // Copy install command to clipboard
  document.getElementById('copy-install')?.addEventListener('click', async () => {
    try {
      await navigator.clipboard.writeText('npm install scenarist');
      const button = document.getElementById('copy-install');
      if (button) {
        button.classList.add('copied');
        setTimeout(() => {
          button.classList.remove('copied');
        }, 2000);
      }
    } catch (err) {
      console.error('Failed to copy:', err);
    }
  });
</script>
