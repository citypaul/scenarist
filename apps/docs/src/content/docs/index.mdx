---
title: Scenarist
description: E2E testing where your backend actually runs. Test complete user journeys with real Server Components, API routes, and validation.
template: splash
hero:
  title: E2E Testing That Actually Runs Your Backend
  tagline: Traditional mocking stops your backend from executing. Scenarist mocks only external APIs—your Server Components render, your API routes run, your validation executes. Test complete user journeys in the browser with real application logic.
  image:
    file: ../../assets/hero-illustration.svg
    alt: Illustration showing backend server with API routes, Server Components, and validation connected to a browser running tests
  actions:
    - text: Get Started
      link: /introduction/quick-start
      icon: right-arrow
      variant: primary
    - text: View on GitHub
      link: https://github.com/citypaul/scenarist
      icon: external
      variant: secondary
---

import { Card, CardGrid } from '@astrojs/starlight/components';

---

## Your Backend Code Actually Runs

**Unlike pure mocking solutions, Scenarist tests your real application logic.** Your Server Components execute and render. Your API routes process requests. Your business logic validates data. Only external API calls (Stripe, SendGrid, etc.) are mocked. This means you're testing the actual code that runs in production, not just mock responses.

:::tip[The Critical Difference]
**Traditional approach:** Mock everything → Backend never runs → Testing mock responses

**Scenarist approach:** Mock only external APIs → Backend runs normally → Testing real application behavior

**Why this matters for Server Components:** Next.js Server Components can't be unit tested—they require E2E testing. But MSW alone means they never execute. Scenarist lets you test complete user journeys **while your Server Components actually render.**
:::

Works with **Express**, **Next.js** (Pages + App Router), **Fastify**, **Hono**, **Remix**, and **SvelteKit**.

---

## Why Scenarist?

| Feature | Jest/Vitest | Playwright Alone | MSW Alone | Cypress | **Scenarist + Playwright** |
|---------|-------------|------------------|-----------|---------|----------------------------|
| **Test Type** | Unit tests | E2E tests | HTTP mocking | E2E tests | **Full-stack integration** |
| **Your Backend Runs** | N/A (no server) | ⚠️ Optional¹ | ❌ Never runs | ❌ Stubs only | ✅ **Always executes** |
| **Server Components** | ❌ Can't test | ⚠️ If backend runs¹ | ❌ Never execute | ❌ Not supported | ✅ **Real execution** |
| **Full User Journeys** | ❌ No browser | ✅ Yes | ❌ No browser | ✅ Yes | ✅ **Yes** |
| **Change Scenarios** | N/A | Restart app² | Restart app | Restart tests | ✅ **Instant switching** |
| **Parallel Tests** | ✅ Fast | ✅ Yes | ❌ Shared state³ | ⚠️ Limited | ✅ **Perfect isolation** |
| **Test Speed** | ✅ Instant | ⚠️ Slow²⁴ | Slow (restarts) | Slow | ✅ **Fast** |
| **State Management** | N/A | Manual setup | Manual setup | Manual setup | ✅ **Built-in capture** |

:::tip[Why This Matters]
**Jest/Vitest**: Can't test Server Components or browser flows
**Playwright alone**: Either slow (real backend with restarts) or your backend never runs (mocked)
**MSW alone**: Backend never executes—you're testing mock responses, not your code
**Cypress**: Stubs everything—Server Components never render, validation never runs

**Scenarist + Playwright**: Real backend execution + instant scenario switching + built-in state = fast integration tests
:::

<small>¹Playwright *can* run with real backend, but requires app restart per scenario (slow)
²Changing scenarios = restart app = slow feedback loop
³Shared MSW handlers cause test pollution and flaky tests
⁴Fast if mocking backend (but then backend doesn't run)</small>

---

## Quick Example

```typescript
// Define scenarios once - test different backend states
export const scenarios = {
  success: {
    id: 'success',
    name: 'Payment Success',
    mocks: [
      {
        method: 'POST',
        url: 'https://api.stripe.com/v1/charges',
        response: { status: 200, body: { id: 'ch_123', status: 'succeeded' } },
      },
    ],
  },
  cardDeclined: {
    id: 'cardDeclined',
    name: 'Card Declined',
    mocks: [
      {
        method: 'POST',
        url: 'https://api.stripe.com/v1/charges',
        response: {
          status: 402,
          body: { error: { code: 'card_declined', message: 'Card declined' } },
        },
      },
    ],
  },
};

// Test complete user journeys - your backend executes
test('successful checkout flow', async ({ page, switchScenario }) => {
  await switchScenario(page, 'success');
  await page.goto('/checkout');

  // Fill form, submit - YOUR validation runs, YOUR Server Components render
  await page.fill('[name="amount"]', '100');
  await page.click('button[type="submit"]');

  await expect(page.locator('.success')).toBeVisible();
});

test('handles card declined', async ({ page, switchScenario }) => {
  await switchScenario(page, 'cardDeclined');  // Instant switch, no restart
  await page.goto('/checkout');

  await page.fill('[name="amount"]', '100');
  await page.click('button[type="submit"]');

  // YOUR error handling executes
  await expect(page.locator('.error')).toContainText('Card declined');
});
```

---

## Get Started

<CardGrid>
  <Card title="Quick Start" icon="rocket">
    Framework-agnostic 5-minute guide. Works with Express, Next.js, Fastify, Hono, Remix, and any Node.js framework.

    [Get Started →](/introduction/quick-start)
  </Card>
  <Card title="Express Setup" icon="seti:nodejs">
    REST APIs, GraphQL servers, microservices. Zero boilerplate with AsyncLocalStorage.

    [Express Guide →](/frameworks/express/getting-started)
  </Card>
  <Card title="Next.js Setup" icon="seti:next">
    Test Server Components, Server Actions, and API routes. Supports Pages and App Router.

    [Next.js Guide →](/frameworks/nextjs/getting-started)
  </Card>
  <Card title="Example Apps" icon="open-book">
    Explore complete working examples with comprehensive test suites.

    [View Examples →](https://github.com/citypaul/scenarist/tree/main/apps)
  </Card>
</CardGrid>
